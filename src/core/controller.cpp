// -*-c++-*- VCity project, 3DUSE, Liris, 2013, 2014
////////////////////////////////////////////////////////////////////////////////
#include "controller.hpp"
#include "application.hpp"
////////////////////////////////////////////////////////////////////////////////
namespace vcity
{
    ////////////////////////////////////////////////////////////////////////////////
    Controller::Controller()
    {

    }
    ////////////////////////////////////////////////////////////////////////////////
    Controller::~Controller()
    {

    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::reset()
    {

    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::addNode(const URI& URI)
    {

    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::deleteNode(const URI& URI)
    {

    }

    ////////////////////////////////////////////////////////////////////////////////
    void Controller::addInfo(const vcity::URI& uriLayer, std::vector<osgInfo*> info)
    {
        //app().getScene().addInfo(uriLayer, info);
    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::addLayer(const std::string& name)
    {
        //app().getScene().addLayer(name); // MT TODO
    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::deleteLayer(const vcity::URI& uri)
    {
        app().getScene().deleteLayer(uri);
    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::setLayerName(const vcity::URI& uri, const std::string& name)
    {
        abstractLayer* abstractlayer = app().getScene().getLayer(uri);
        if (abstractlayer)
        {
            abstractlayer->setName(name);
        }
    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::addTile(const vcity::URI& uriLayer, vcity::Tile& tile)
    {
        app().getScene().addTile(uriLayer, &tile);
    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::deleteTile(const vcity::URI& uri)
    {
        app().getScene().deleteTile(uri);
    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::setTileName(const vcity::URI& uri, const std::string& name)
    {
        Tile* tile = app().getScene().getTile(uri);
        if (tile)
        {
            tile->setName(name);
        }
    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::addTag(const vcity::URI& uri, citygml::CityObjectTag* tag)
    {

    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::addState(const vcity::URI& uri, citygml::CityObjectState* state)
    {

    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::addDynState(const vcity::URI& uri, citygml::CityObjectDynState* state)
    {

    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::addShpNode(const vcity::URI& uriLayer, OGRDataSource* poDS)
    {
        abstractLayer* layer = app().getScene().getLayer(uriLayer);
        if (layer)
        {
            LayerShp* layerShp = dynamic_cast<LayerShp*>(layer);
            if (layerShp)
            {
                layerShp->m_shp = poDS;
            }
        }
    }
    ////////////////////////////////////////////////////////////////////////////////
    void Controller::resetSelection()
    {
        app().resetSelectedNodes();
    }
    ////////////////////////////////////////////////////////////////////////////////
    bool Controller::addSelection(const vcity::URI& uri)
    {
        return app().addSelectedNode(uri);
    }
    ////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
} // namespace vcity
////////////////////////////////////////////////////////////////////////////////
